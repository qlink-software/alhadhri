<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="qlk_law_dashboard.LawyerDashboard" owl="1">
        <div class="qlk-law-dashboard"
             t-att-style="'--qlk-primary: ' + (palette.primary || '#0F5CA8') + '; --qlk-accent: ' + (palette.accent || '#22B6C8') + '; --qlk-muted: ' + (palette.muted || '#0D3E7A') + '; --qlk-success: ' + (palette.success || '#27AE60') + ';'">
            <t t-if="state.loading">
                <div class="qlk-dashboard__loading">
                    <div class="spinner-border text-light" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                    <span>Loading...</span>
                </div>
            </t>
            <t t-else="">
                <section class="qlk-dashboard__hero">
                    <div class="hero__info">
                        <h1>Lawyer Dashboard</h1>
                        <p>
                            Welcome,
                            <strong t-esc="userInfo.name or ''"/>
                        </p>
                        <t t-if="userInfo.company">
                            <span class="hero__company" t-esc="userInfo.company"/>
                        </t>
                    </div>
                    <div class="hero__metrics">
                        <div class="metric-card">
                            <span>Total Tasks</span>
                            <strong t-esc="tasks.count"/>
                        </div>
                        <div class="metric-card">
                            <span>Task Hours</span>
                            <strong t-esc="formatHours(tasks.hours)"/>
                        </div>
                    </div>
                </section>

                <section class="qlk-dashboard__grid">
                    <article class="qlk-card">
                        <header>
                            <div>
                                <h2>My Cases</h2>
                                <small t-esc="cases.count + ' items'"/>
                            </div>
                            <button t-if="cases.action"
                                    class="qlk-link"
                                    type="button"
                                    t-on-click="openCases">
                                View All
                            </button>
                        </header>
                        <ul class="qlk-list">
                            <li t-if="!cases.items.length" class="qlk-empty">No cases found.</li>
                            <t t-foreach="cases.items" t-as="item" t-key="item.id">
                                <li class="qlk-list__item" t-on-click="() => openRecord(item.url)">
                                    <div class="item__title">
                                        <span class="item__name" t-esc="item.name"/>
                                        <span class="item__badge" t-esc="item.state.label"/>
                                    </div>
                                    <div class="item__meta">
                                        <span class="item__client" t-esc="item.client"/>
                                        <span class="item__date" t-esc="item.next_hearing"/>
                                    </div>
                                </li>
                            </t>
                        </ul>
                    </article>

                    <article class="qlk-card accent">
                        <header>
                            <div>
                                <h2>Hearings This Week</h2>
                                <small t-esc="hearingsWeek.date_range.start + ' - ' + hearingsWeek.date_range.end"/>
                            </div>
                            <button t-if="hearingsWeek.action"
                                    class="qlk-link"
                                    type="button"
                                    t-on-click="openHearingsWeek">
                                View All
                            </button>
                        </header>
                        <ul class="qlk-list">
                            <li t-if="!hearingsWeek.items.length" class="qlk-empty">No hearings scheduled this week.</li>
                            <t t-foreach="hearingsWeek.items" t-as="item" t-key="item.id">
                                <li class="qlk-list__item" t-on-click="() => openRecord(item.url)">
                                    <div class="item__title">
                                        <span class="item__name" t-esc="item.name"/>
                                        <span class="item__badge badge--success" t-esc="item.date"/>
                                    </div>
                                    <div class="item__meta">
                                        <span class="item__client" t-esc="item.case"/>
                                        <span class="item__court" t-esc="item.court"/>
                                    </div>
                                </li>
                            </t>
                        </ul>
                    </article>

                    <article class="qlk-card muted">
                        <header>
                            <div>
                                <h2>Hearings Today</h2>
                                <small t-esc="hearingsToday.date"/>
                            </div>
                            <button t-if="hearingsToday.action"
                                    class="qlk-link"
                                    type="button"
                                    t-on-click="openHearingsToday">
                                View All
                            </button>
                        </header>
                        <ul class="qlk-list">
                            <li t-if="!hearingsToday.items.length" class="qlk-empty">No hearings scheduled today.</li>
                            <t t-foreach="hearingsToday.items" t-as="item" t-key="item.id">
                                <li class="qlk-list__item" t-on-click="() => openRecord(item.url)">
                                    <div class="item__title">
                                        <span class="item__name" t-esc="item.name"/>
                                        <span class="item__badge badge--today" t-esc="item.date"/>
                                    </div>
                                    <div class="item__meta">
                                        <span class="item__client" t-esc="item.case"/>
                                        <span class="item__court" t-esc="item.court"/>
                                    </div>
                                </li>
                            </t>
                        </ul>
                    </article>

                    <article class="qlk-card">
                        <header>
                            <div>
                                <h2>My Consultations</h2>
                                <small t-esc="consultations.count + ' items'"/>
                            </div>
                            <button t-if="consultations.action"
                                    class="qlk-link"
                                    type="button"
                                    t-on-click="openConsultations">
                                View All
                            </button>
                        </header>
                        <ul class="qlk-list">
                            <li t-if="!consultations.items.length" class="qlk-empty">No consultations recorded.</li>
                            <t t-foreach="consultations.items" t-as="item" t-key="item.id">
                                <li class="qlk-list__item" t-on-click="() => openRecord(item.url)">
                                    <div class="item__title">
                                        <span class="item__name" t-esc="item.name"/>
                                        <span class="item__badge" t-esc="item.state.label"/>
                                    </div>
                                    <div class="item__meta">
                                        <span class="item__client" t-esc="item.client"/>
                                        <span class="item__date" t-esc="item.date"/>
                                    </div>
                                </li>
                            </t>
                        </ul>
                    </article>

                    <article class="qlk-card">
                        <header>
                            <div>
                                <h2>Police Reports</h2>
                                <small t-esc="complaints.count + ' items'"/>
                            </div>
                            <button t-if="complaints.action"
                                    class="qlk-link"
                                    type="button"
                                    t-on-click="openComplaints">
                                View All
                            </button>
                        </header>
                        <ul class="qlk-list">
                            <li t-if="!complaints.items.length" class="qlk-empty">No police reports recorded.</li>
                            <t t-foreach="complaints.items" t-as="item" t-key="item.id">
                                <li class="qlk-list__item" t-on-click="() => openRecord(item.url)">
                                    <div class="item__title">
                                        <span class="item__name" t-esc="item.name"/>
                                        <span class="item__badge" t-esc="item.state.label"/>
                                    </div>
                                    <div class="item__meta">
                                        <span class="item__client" t-esc="item.client"/>
                                        <span class="item__date" t-esc="item.date"/>
                                    </div>
                                </li>
                            </t>
                        </ul>
                    </article>

                </section>
            </t>
        </div>
    </t>
</templates>
