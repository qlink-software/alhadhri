<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="contact_attachments_view_form" model="ir.ui.view">
        <field name="name">contact.attachments.view.form</field>
        <field name="model">contact.attachments</field>
        <field name="arch" type="xml">
            <form string="">
                <sheet>
                    <div class="row justify-content-between position-relative w-100 m-0 mb-2">
                        <div class="oe_title mw-75 ps-0 pe-2">
                            <h1 class="d-flex flex-row align-items-center"> 
                                <field name="name" placeholder="Contract Attachment's Description" required="True" style="font-size: min(4vw, 2.6rem);"/>
                            </h1>     
                        </div>
                        <div class="o_employee_avatar m-0 p-0">
                            <field name="blue_image" widget="image" class="oe_avatar m-0" options="{&quot;zoom&quot;: true, &quot;preview_image&quot;:&quot;avatar_128&quot;}"/>   
                        </div>
                    </div>           
                    <group>
                        <group>
                            <field name="qatar_id" />
                            <field name="commercial_register" />
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>
    <record id="view_client_document_list" model="ir.ui.view">
        <field name="name">qlk.client.document.list</field>
        <field name="model">qlk.client.document</field>
        <field name="arch" type="xml">
            <list decoration-danger="needs_translation and not is_translated"
                  decoration-success="is_translated">
                <button name="action_preview" type="object" icon="fa-paperclip" title="Preview" class="btn-link"/>
                <field name="name"/>
                <field name="partner_id"/>
                <field name="document_type"/>
                <field name="attachment_id" readonly="1" options="{'no_open': True}"/>
                <field name="needs_translation"/>
                <field name="is_translated"/>
                <field name="related_model"/>
                <field name="create_date"/>
            </list>
        </field>
    </record>
    <record id="view_client_document_form" model="ir.ui.view">
        <field name="name">qlk.client.document.form</field>
        <field name="model">qlk.client.document</field>
        <field name="arch" type="xml">
            <form string="Client Document">
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="partner_id"/>
                            <field name="document_type"/>
                            <field name="attachment_id"
                                   context="{'default_res_model': 'res.partner', 'default_res_id': partner_id, 'default_public': False}"
                                   domain="[('res_model', '=', 'res.partner'), ('res_id', '=', partner_id)]"/>
                        </group>
                        <group>
                            <field name="needs_translation"/>
                            <field name="is_translated"/>
                            <field name="related_model" readonly="1"/>
                            <field name="related_res_id" readonly="1"/>
                        </group>
                    </group>
                    <group>
                        <div class="oe_inline">
                            <span class="badge text-bg-danger"
                                  modifiers="{'invisible': ['|', ('needs_translation', '=', False), ('is_translated', '=', True)]}">
                                Needs Translation
                            </span>
                            <span class="badge text-bg-success"
                                  modifiers="{'invisible': [('is_translated', '=', False)]}">
                                Translated
                            </span>
                        </div>
                    </group>
                    <group>
                        <field name="notes"/>
                    </group>
                    <group string="Preview">
                        <field name="preview_html" nolabel="1" readonly="1"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>
    <record id="contact_attachments_action" model="ir.actions.act_window">
        <field name="name">Contact Attachments</field>
        <field name="res_model">contact.attachments</field>
        <field name="view_mode">list,form</field>
        <field name="domain">[]</field>
        <field name="context">{}</field>
        
    </record>
    <record id="action_client_documents" model="ir.actions.act_window">
        <field name="name">Client Documents</field>
        <field name="res_model">qlk.client.document</field>
        <field name="view_mode">list,form</field>
        <field name="view_id" ref="view_client_document_list"/>
    </record>

    <!-- <record id="view_partner_hide_financial_audit_page" model="ir.ui.view">
        <field name="name">res.partner.form.hide.financial.audit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="qlk_law.base_res_partner_form_inherit"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='Financial Audit Company']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
        </field>
    </record> -->
    
    <record id="inherit_view_id_res_partner" model="ir.ui.view">
        <field name="name">res.partner.view.form.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <!-- <xpath expr="//field[@name='industry_id']" position="replace">
            </xpath> -->
            <xpath expr="//field[@name='category_id']" position="after">
                <field name="industry_id" />
                <field name="create_date" />
            </xpath>
            <!-- Add a header button area in the form, before the sheet -->
            <xpath expr="//sheet" position="before">
                <header>
                    <button name="action_create_bd_proposal"
                            type="object"
                            string="Create Proposal"
                            class="btn-primary"
                            modifiers="{'invisible': [('id', '=', False)]}"/>
                </header>
            </xpath>
            <xpath expr="//page[@name='sales_purchases']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <!-- Hide contact image/avatar upload -->
            <xpath expr="//field[@name='image_1920']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//div[@name='button_box']" position="inside">
                <button name="action_view_bd_proposals"
                        type="object"
                        class="oe_stat_button"
                        icon="fa-file-text-o"
                        modifiers="{'invisible': [('id', '=', False)]}">
                    <field name="proposal_count" widget="statinfo" string="Proposals"/>
                </button>
                <button name="action_view_bd_engagements"
                        type="object"
                        class="oe_stat_button"
                        icon="fa-file-signature"
                        modifiers="{'invisible': [('id', '=', False)]}">
                    <field name="engagement_count" widget="statinfo" string="Engagements"/>
                </button>
                <button name="action_view_partner_projects"
                        type="object"
                        class="oe_stat_button"
                        icon="fa-briefcase"
                        modifiers="{'invisible': [('id', '=', False)]}">
                    <field name="project_count" widget="statinfo" string="Projects"/>
                </button>
                <button name="get_client_case"
                        type="object"
                        class="oe_stat_button"
                        icon="fa-balance-scale"
                        modifiers="{'invisible': [('id', '=', False)]}">
                    <field name="case_count" widget="statinfo" string="Cases"/>
                </button>
            </xpath>
            <!-- <xpath expr="//page[@name='invoicing']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath> -->
            <xpath expr="//page[@name='internal_notes']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//page[@name='accounting']//group[@id='invoice_send_settings']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//page[@name='accounting']//group[@name='accounting_automation']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//page[@name='accounting']//field[@name='bank_ids']" position="attributes">
                <attribute name="required">1</attribute>
            </xpath>
            <xpath expr="//sheet/*[1]" position="before">
                <div class="alert alert-warning o_qlk_hours_notice">You must enter hours.</div>
            </xpath>
            <!-- <xpath expr="//div[@name='button_box']" position="inside">
                <button name="action_create_bd_proposal"
                        type="object"
                        string="Create Proposal"
                        class="oe_stat_button"
                        icon="fa-file-text-o"
                        modifiers="{'invisible': [('id', '=', False)]}"/>
            </xpath> -->
            <!-- <xpath expr="//button[@name='get_client_case']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath> -->
            <!-- <xpath expr="//field[@name='delivery_type']" position="attributes">
                <attribute name="modifiers">{'invisible': [('is_company','=', False)]}</attribute>
            </xpath> -->
            <xpath expr="//notebook" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//div[@class='o_address_format']/ancestor::group[1]" position="after">
                <group string="Client Identifiers" class="o_inner_group" col="4">
                    <!-- <field name="code" readonly="1"/> -->
                    <field name="client_year"/>
                </group>
            </xpath>
            <!-- <xpath expr="//sheet" position="inside">
                <div class="alert alert-info o_bd_poa_reminder" modifiers="{'invisible': [('poa_expiry_reminder', '=', False)]}">
                    <span class="fw-bold">Client POA Expiry Reminder:</span>
                    <field name="poa_expiry_reminder" readonly="1" nolabel="1"/>
                </div>
                <div class="badge bg-secondary o_bd_client_code" modifiers="{'invisible': [('bd_client_code', '=', False)]}">
                    <span>Client Code:</span>
                    <field name="bd_client_code" readonly="1" nolabel="1"/>
                </div>
                <group>
                    <field name="poa_next_expiration_date" readonly="1"/>
                </group>
            </xpath> -->

            <xpath expr="//sheet//field[@name='ref']" position="after">
                <field name="industry_id"/>
            </xpath>
            <!-- <xpath expr="//group[.//field[@name='phone']]" position="after">
                <group string="Customer Type" class="o_inner_group" col="4">
                    <field name="customer"/>
                    <field name="is_opponent"/>
                    <field name="is_targeted_person" modifiers="{'invisible': [('is_opponent', '=', False)]}"/> -->
                    <!-- <field name="is_adviser"/> -->
                    <!-- <field name="is_lawyer"/> -->
                    <!-- <field name="is_employee"/> -->
                    <!-- <field name="is_expert"/> -->
                    <!-- <field name="is_other"/>
                </group>
            </xpath> -->

            <!-- <xpath expr="//field[@name='function']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='title']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='category_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='website']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath> -->
            <xpath expr="//sheet/notebook" position="after">
                <notebook>
                <page string="Client Attachments">
                    <field name="client_attachment_ids" widget="many2many_binary" nolabel="1"/>
                </page>
                <page string="Tasks / Hours">
                    <field name="qlk_task_ids" context="{'default_partner_id': id, 'default_department': 'management'}">
                        <list editable="bottom">
                            <field name="name"/>
                            <field name="department"/>
                            <field name="employee_id"/>
                            <field name="hours_spent" widget="float_time" options="{'displaySeconds': True}"/>
                            <field name="date_start"/>
                        </list>
                        <form string="Task / Hours">
                            <sheet>
                                <group>
                                    <field name="name"/>
                                    <field name="employee_id"/>
                                    <field name="department"/>
                                    <field name="hours_spent" widget="float_time" options="{'displaySeconds': True}"/>
                                    <field name="date_start"/>
                                </group>
                                <group>
                                    <field name="description"/>
                                </group>
                            </sheet>
                        </form>
                    </field>
                </page>
                </notebook>
            </xpath>
            <xpath expr="//field[@name='mobile']" position="attributes">
                <attribute name="required">1</attribute>
            </xpath>
            <xpath expr="//field[@name='email']" position="attributes">
                <attribute name="required">1</attribute>
            </xpath>
            <xpath expr="//field[@name='vat']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='user_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='city']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='state_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='zip']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='country_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='function']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='title']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='category_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='website']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='parent_id']" position="replace">
                <field name="parent_id" modifiers="{'invisible': True}"/>
            </xpath>
            <xpath expr="//chatter" position="replace">
                <chatter/>
            </xpath>
            <!-- <xpath expr="//div[contains(@class,'o_AttachmentBox')]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath> -->
            <!-- <xpath expr="//button[contains(@class,'o_AttachmentButton')]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath> -->
        </field>
    </record>

    

    <record id="inherit_view_partner_list_hide_fields" model="ir.ui.view">
        <field name="name">res.partner.list.hide.fields</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='mobile']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='phone']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='email']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='vat']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='user_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='city']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='state_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='country_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='category_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
        </field>
    </record>

    <record id="inherit_view_partner_hide_is_expert" model="ir.ui.view">
        <field name="name">res.partner.form.hide.is_expert</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="qlk_law.base_res_partner_form_inherit"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='is_expert']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='is_adviser']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
        </field>
    </record>
    
    <record id="inherit_view_id_inherit_res_partner" model="ir.ui.view">
        <field name="name">res.partner.view.form.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_res_partner_filter"/>
        <field name="arch" type="xml">
            <search>
                <group expand="0" name="group_by" string="Group By">
                    <filter name="date" string="Date" domain="[]" context="{'group_by' : 'indust_date'}"/>
                    <filter name="client_year" string="Client Year" domain="[]" context="{'group_by' : 'client_year'}"/>
                </group>
            </search>
        </field>
    </record>
    <record id="inherit_view_id_res_partner_search_target_this_month" model="ir.ui.view">
        <field name="name">res.partner.view.form.inherit</field>
        <field name="model">res.partner</field>
        <field name="arch" type="xml">
            <search>
                <group expand="0" name="group_by" string="Group By">
                    <filter name="date" string="Date" domain="[]" context="{'group_by' : 'indust_date'}"/>
                    <filter name="client_year" string="Client Year" domain="[]" context="{'group_by' : 'client_year'}"/>
                </group>
            </search>
        </field>
    </record>

    <record id="view_res_partner_filter_client_data" model="ir.ui.view">
        <field name="name">res.partner.client.data.search</field>
        <field name="model">res.partner</field>
        <field name="arch" type="xml">
            <search string="Search Partner">
                <field name="name"
                       filter_domain="['|', '|', '|', '|', ('complete_name', 'ilike', self), ('ref', 'ilike', self), ('email', 'ilike', self), ('vat', 'ilike', self), ('company_registry', 'ilike', self)]"/>
                <field name="parent_id" domain="[('is_company', '=', True)]" operator="child_of"/>
                <field name="email" filter_domain="[('email', 'ilike', self)]"/>
                <field name="phone" filter_domain="['|', ('phone', 'ilike', self), ('mobile', 'ilike', self)]"/>
                <field name="category_id" string="Tag" operator="child_of"/>
                <field name="user_id"/>
                <separator/>
                <filter string="Individuals" name="type_person" domain="[('is_company', '=', False)]"/>
                <filter string="Companies" name="type_company" domain="[('is_company', '=', True)]"/>
                <separator/>
                <filter string="Archived" name="inactive" domain="[('active', '=', False)]"/>
                <separator/>
                <group expand="0" name="group_by" string="Group By">
                    <filter name="salesperson" string="Salesperson" domain="[]" context="{'group_by' : 'user_id'}"/>
                    <filter name="group_company" string="Company" context="{'group_by': 'parent_id'}"/>
                    <filter name="group_country" string="Country" context="{'group_by': 'country_id'}"/>
                    <filter name="client_year" string="Client Year" context="{'group_by': 'client_year'}"/>
                </group>
            </search>
        </field>
    </record>

    <record id="inherit_res_partner_kanban_order_by_client_year" model="ir.ui.view">
        <field name="name">res.partner.kanban.order.client.year</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.res_partner_kanban_view"/>
        <field name="arch" type="xml">
            <xpath expr="//kanban" position="attributes">
                <attribute name="default_order">client_year desc</attribute>
            </xpath>
        </field>
    </record>
    
</odoo>
