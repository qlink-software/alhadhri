<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_qlk_case_stage_form_inherit" model="ir.ui.view">
            <field name="name">qlk.case.form.stage.inherit</field>
            <field name="model">qlk.case</field>
            <field name="inherit_id" ref="qlk_law.view_qlk_case_form"/>
            <field name="arch" type="xml">
                <xpath expr="//form/header" position="inside">
                    <button name="action_case_previous_stage" type="object" string="Previous Stage" class="btn-secondary"/>
                    <button name="action_case_next_stage" type="object" string="Next Stage" class="btn-primary"/>
                    <button name="action_case_mark_stage_completed" type="object" string="Mark Stage Complete" class="btn-light"
                            options="{'invisible': [('stage_id', '=', False)]}"/>
                    <field name="stage_id" widget="statusbar" options="{'readonly': [('id', '!=', False)]}"/>
                    <button name="action_open_pre_litigation"
                            type="object"
                            string="Create Pre-Litigation"
                            class="btn-primary"
                            modifiers="{'invisible': [('litigation_flow', '!=', 'pre_litigation')]}"/>
                </xpath>

                <xpath expr="//sheet/group[1]" position="before">
                    <group>
                        <field name="litigation_flow"/>
                        <field name="pre_litigation_id" readonly="1" context="{'default_case_id': id}"/>
                    </group>
                </xpath>

                <xpath expr="//sheet//notebook" position="inside">
                    <page string="Client Documents">
                        <group>
                        <!-- <field name="client_document_warning"
                               nolabel="1"
                               widget="html"
                               options="{'invisible': [('client_document_warning_required', '=', False)]}"/> -->
                        </group>
                        <group>
                            <span class="text-muted">Client documents are available on the contact record.</span>
                        </group>
                    </page>
                    <page string="Stage Timeline">
                        <field name="stage_log_ids" nolabel="1">
                            <list>
                                <field name="stage_id"/>
                                <field name="date_start"/>
                                <field name="date_end"/>
                                <field name="duration_days"/>
                                <field name="completed_by"/>
                            </list>
                        </field>
                    </page>
                </xpath>
            </field>
        </record>
    </data>
</odoo>
